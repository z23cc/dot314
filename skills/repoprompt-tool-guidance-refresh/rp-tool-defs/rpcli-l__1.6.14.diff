173c173
< A discovery agent analyzes your codebase, selects relevant files within a token budget, and rewrites your instructions into a clarified prompt.
---
> A discovery agent analyzes your codebase, selects relevant files within a token budget, and rewrites your instructions into a clarified prompt. Describe **what** you need, not **where** to look — the agent discovers the right files autonomously. Mention what you know and what you're unsure about; being too prescriptive narrows discovery.
185,186c185,186
< - `<context>`: Background, constraints, file references
< - `<discovery_agent-guidelines>`: Agent hints only (not passed to follow-up model)
---
> - `<context>`: Background, constraints, known file references
> - `<discovery_agent-guidelines>`: Optional starting hints for the agent (not passed to follow-up model). The agent explores beyond these freely — omit if you don't have specific leads.
190,192c190,192
< <task>Add user authentication</task>
< <context>We use JWT tokens. See docs/auth-spec.md for requirements.</context>
< <discovery_agent-guidelines>Focus on src/auth/ and src/middleware/</discovery_agent-guidelines>
---
> <task>Add user authentication using JWT</task>
> <context>The app has an existing session system. See docs/auth-spec.md for requirements.</context>
> <discovery_agent-guidelines>There may be auth-related code in src/auth/ already</discovery_agent-guidelines>
204,206c204,205
<     <discovery_agent-guidelines> for agent-specific hints. The agent
<     explores, selects files, and rewrites this into a clarified prompt
<     for follow-up.
---
>     <discovery_agent-guidelines> for optional starting hints. Describe
>     what you need — the agent finds the right files.
421c420
< **Detail levels** (for diff):
---
> **Detail levels** (for diff/show):
424c423,424
< - `full`: Complete patches
---
> - `patches`: Patch hunks, truncated for safety (~300 lines)
> - `full`: Patch hunks, untruncated (may be large)
445a446,447
> - Inline patches: `{"op":"diff","detail":"patches"}`
> - Full untruncated diff: `{"op":"diff","detail":"full"}`
468c470
<   detail (string): summary | files | full
---
>   detail (string): summary | files | patches | full
514,515d515
<   truncate (boolean)
<     Truncate inline diff output (default true)
517d516
< 
